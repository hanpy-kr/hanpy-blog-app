

```yaml
apiVersion: v1
kind: Service
metadata:
  name: d3-backend-v2-svc
spec:
  type: ClusterIP
  selector:
    app: d3-backend-v2
  ports:
    - port: 3000
      targetPort: 3000
```

---

[클러스터 내부 요청]
↓
┌────────────────────┐
│ Service: d3-backend-v2-svc (ClusterIP) │
│ Port: 3000 │
└────────────────────┘
↓ (Selector: app=d3-backend-v2)
┌────────────────────┐
│ Pod 1 (3000번 포트) │
│ Pod 2 (3000번 포트) │
└────────────────────┘

- 로드밸런싱: 여러 파드가 있을 경우, Service가 트래픽을 자동으로 분산
- 파드의 IP가 변경되더라도 Service를 통해 안정적인 통신 유지

## Service Type 비교

ClusterIP	클러스터 내부 IP로만 접근 가능 - (기본값)	내부 서비스 통신
NodePort	각 노드의 포트를 통해 외부 접근 가능 -	개발/디버깅용 외부 노출
LoadBalancer	외부 로드밸런서를 통해 접근 가능 -	클라우드 환경에서 외부 트래픽 처리
ExternalName	DNS 이름을 외부 서비스로 매핑 -	외부 서비스 연결 시 사용

## 사용

내부 API 통신: Microservice 간 통신에 ClusterIP 사용
외부 트래픽 처리: 외부로 노출이 필요하면 Ingress와 함께 사용
서비스 디스커버리: 파드가 재배포되어도 서비스 이름으로 안정적 접근 가능